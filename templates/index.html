<!DOCTYPE html>
<html lang="en">
<head>
    {% include 'subtemplates/head_shared.html' %}
    <title>HANSEL - E-Texts</title>
</head>
<body>
<div id="content">
    {% include 'subtemplates/sidenav_full.html' %}

    <div class="main">
        <div id="introduction">
            <h1>Introduction</h1>
            <p>
                HANSEL is an open collection of Sanskrit e-texts of all sorts.
                The current collection size is {{ num_items }} items ({{ total_size_mb }} mb in total).
            </p>
            <p>
                Below is a simple alphabetical listing by work title. Click the arrows beside items for more info.
                There's also a <a href="table">tabular view</a> for sorting by author, genre, etc.
            </p>
            <p>Want to contribute? <a href="#contributing">See below!</a></p>
        </div>

        <div id="e-texts">
            <h1>E-Texts</h1>
            <ul>
                {% for item in metadata %}
                <li class="file-item">
                    <div class="link-and-caret">
                        <a href="{{ static_files_path }}/{{ item['Filename'] }}" class="main-link" target="_blank">
                            {{ item['Title'] ~ (' - ' ~ item['Author(s)'] if item['Author(s)'] else '') }}
                        </a>
                        <details class="caret-details">
                            <summary class="toggle-caret"></summary>
                        </details>
                    </div>
                    <ul class="extra-links">
                        <li>
                            <a href="{{ static_files_path }}/{{ item['Filename'] }}" target="_blank">Metadata...</a>
                        </li>
                    </ul>
                </li>
                {% endfor %}
            </ul>
        </div>

        {% include 'subtemplates/index_footer.html' %}

    </div>
</div>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        document.querySelectorAll(".toggle-caret").forEach(caret => {
            caret.addEventListener("click", function(event) {
                event.preventDefault(); // Prevent default summary behavior
                let li = this.closest(".file-item"); // Find the parent <li>
                li.classList.toggle("open"); // Toggle the 'open' class
            });
        });
    });
</script>
</body>
</html>
